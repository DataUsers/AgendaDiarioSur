<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html>
<ui:composition template="/plantilla.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <ui:define name="title">Agenda Diario Sur - Perfil</ui:define>
    <ui:define name="subtitulo">Tu Perfil</ui:define>
    <ui:define name="content">
        <h:messages style="size:4in 6in;color:red " />
        <c:choose>
            <c:when test="#{controlAutorizacion.sesionIniciada()}">
                <br /> 
                <p:panel styleClass="estiloFondo" header="Datos de tu perfil" id="panel" >
                    <h:form >

                        <h:outputLabel styleClass="estiloTexto"  for="textinput">Nombre</h:outputLabel>
                        <div>
                            <h:inputText  styleClass="estiloTexto"  value="#{perfil.nombre}"> </h:inputText>
                        </div>

                        <div>
                            <h:outputLabel styleClass="estiloTexto"   for="textinput">Apellidos</h:outputLabel>
                            <div>
                               <h:inputText styleClass="estiloTexto"  value="#{perfil.apellidos}"> </h:inputText>
                            </div>
                        </div>

                        <div>
                            <h:outputLabel styleClass="estiloTexto" >Fecha Nacimiento (Dia-Mes-Año)</h:outputLabel>
                            <div>    
                                <h:inputText styleClass="estiloTexto"  value="#{perfil.fechaNacimiento}" label = "Date">
                                    <f:convertDateTime pattern = "dd-MM-yyyy" />
                                 </h:inputText>
                            </div>
                        </div>

                        
                        <div>
                            <h:outputLabel styleClass="estiloTexto" >Email</h:outputLabel>
                            <div>
                                <h:inputText styleClass="estiloTexto"  disabled="true" value="#{perfil.email}"></h:inputText>
                            </div>
                        </div>
                        
                        <div>
                            <h:outputLabel styleClass="estiloTexto" >Tipo de Usuario</h:outputLabel>
                            <div>
                                <h:inputText styleClass="estiloTexto"  disabled="true" value="#{perfil.tipoUsuario}"></h:inputText>
                            </div>
                        </div>
                        <div>

                            <h:outputLabel styleClass="estiloTexto" >Cuenta Twitter</h:outputLabel>
                            <div>
                                <h:inputText styleClass="estiloTexto"  value="#{perfil.cuentaTwitter}"></h:inputText>
                            </div>

                            <h:outputLabel styleClass="estiloTexto"  >Cuenta Facebook</h:outputLabel>
                            <div>
                                <h:inputText value="#{perfil.cuentaFacebook}" ></h:inputText>
                            </div>
                        </div>
                        <br/>
                        <div>
                            <div>
                                <div>
                                    <h:commandButton styleClass="estiloTexto"  type="submit" value="Actualizar datos" action="#{perfil.validarCambiosPerfil()}"> </h:commandButton>
                                    <h:commandButton styleClass="estiloTexto" value="Cancelar cambios" type="reset" ></h:commandButton>
                                </div>
                            </div>
                        </div>
                    </h:form>
                </p:panel>


                <p:panel styleClass="estiloFondo" header="Gestionar Constraseña" id="panel1">
                    <h:form>

                        <h:outputLabel styleClass="estiloTexto" >Tu contraseña actual</h:outputLabel>
                        <div>
                            <h:inputSecret styleClass="estiloTexto"  id="oldPass" value="#{perfil.contrasenaAntigua}"> </h:inputSecret>    
                        </div>

                        <h:outputLabel styleClass="estiloTexto" >Nueva Contraseña</h:outputLabel>
                        <div>
                            <h:inputSecret id="Pass" value="#{perfil.nuevaContrasena}"></h:inputSecret>
                        </div>

                        <h:outputLabel styleClass="estiloTexto" >Confirmar Nueva Contraseña </h:outputLabel>
                        <div>
                            <h:inputSecret styleClass="estiloTexto"  id="newPass" value="#{perfil.confirmacionContrasena}"></h:inputSecret>
                        </div>
                        
                        <br/>
                        <div>
                            <div>
                                <div>
                                    <h:commandButton styleClass="estiloTexto" type="submit"  value="Actualizar Contraseña" action="#{perfil.cambiarContrasenia()}"></h:commandButton>
                                    <h:commandButton styleClass="estiloTexto"  value="Reestablecer" type="reset"></h:commandButton>
                                </div>
                            </div>
                        </div>
                    </h:form>  
                </p:panel>
            </c:when>
        </c:choose> 
        
    </ui:define>
</ui:composition>
